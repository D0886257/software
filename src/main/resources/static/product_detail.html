<!doctype html>
<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
  <div class="container py-4 my-4 mx-auto d-flex flex-column" id="productList">
  </div>


  <!-- Optional JavaScript; choose one of the two! -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <!-- Option 1: Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
          crossorigin="anonymous"></script>

  <!-- Option 2: Separate Popper and Bootstrap JS -->
  <!--
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
  -->

  <script>
   $( document ).ready( function() {
    console.log( "ready!" );
    emptyProducts();
    getProducts('products');
  });

     $('#searchProduct').click(function(){
        const keyword = $('#productKeyword').val();
        if(keyword.trim() === ''){
            getProducts('products');
        }else{
            getProducts('products/'+ keyword);
            emptyProducts();
        }
    });

    function emptyProducts(){
        $('#productList').empty();
    }



    function addProducts(products){
        for ( let product of products ) {


        let html = '<div class="header">';
        html += '<div class="row r1">';
        html += '<div class="col-md-9 abc">';
        html += '<h1">' + product.name + '</h1>';
        html += '</div>';
        html += '<div class="col-md-3 text-right pqr"><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i></div>';
        html += '</div>';
        html += '</div>';
        html += '<div class="container-body mt-4">';
        html += '<div class="row r3">';
        html += '<div class="col-md-5 p-0 klo">';
        html += '<ul>';
        html += '<li>' + product.description + '</li>';
        html += '</ul>';
        html += '</div>';
        html += '<div class="col-md-7"> <img src="'+ product.imageUrl +'" width="90%" height="95%"> </div>';
        html += '</div>';
        html += '</div>';
        html += '<div class="col-md-4 quantity">';
        html += '<label for="quantity">數量:</label>';
        html += '<input id="quantity" type="number" value ="1" class="form-control quantity-input">';
        html += '</div>';
        html += '<div class="footer d-flex flex-column mt-5">';
        html += '<div class="row r4">';
        html += '<div class="col-md-2 myt "><button type="button" class="btn btn-outline-warning"><a href="#">ADD TO CART</a></button></div>';
        html += '<div class="col-md-2 myt "><button type="button" class="btn btn-outline-warning"><a href="#">BUY NOW</a></button></div>';
        html += '</div>';
        html += '</div>';
        $('#productList').append(html);
        }

    }


    function getProducts(targetUrl){
        $.ajax({
          // The URL for the request
          url: targetUrl,

          // Whether this is a POST or GET request
          type: "GET",

          // The type of data we expect back
          dataType : "json",
        })

    // Code to run if the request succeeds (is done);
    // The response is passed to the function
    .done(function( json ) {
      let products = json;

      addProducts(products);

    })
    // Code to run if the request fails; the raw request and
    // status codes are passed to the function
    .fail(function( xhr, status, errorThrown ) {
      alert( "Sorry, there was a problem!" );
      console.log( "Error: " + errorThrown );
      console.log( "Status: " + status );
      console.dir( xhr );
    })
    // Code to run regardless of success or failure;
    .always(function( xhr, status ) {
      //alert( "The request is complete!" );
    });
    }
  </script>


  <style type="text/css">
        body {
    background-color: #f9f9fa
    font-family: Arial, Helvetica, sans-serif
}

.container {
    background: #fff !important;
    border: none;
    border-radius: none
}

.abc {
    padding-left: 40px
}

.pqr {
    padding-right: 70px;
    padding-top: 14px
}

.para {
    float: right;
    margin-right: 0;
    padding-left: 80%;
    top: 0
}

.fa-star {
    color: blue
}

li {
    list-style: none;
    line-height: 50px;
    color: #000
}

.col-md-2 {
    padding-bottom: 20px;
    font-weight: bold
}

.col-md-2 a {
    text-decoration: none;
    color: #000
}

.col-md-2.mio {
    font-size: 12px;
    padding-top: 7px
}

.des::after {
    content: '.';
    font-size: 0;
    display: block;
    border-radius: 20px;
    height: 6px;
    width: 55%;
    background: #eee;
    margin: 14px 0
}

.r4 {
    padding-left: 25px
}

.btn-outline-warning {
    border-radius: 0;
    border: 2px solid gray;
    color: #eee;
    font-size: 12px;
    font-weight: bold;
    width: 70%
}

@media screen and (max-width: 620px) {
    .container {
        width: 98%;
        display: flex;
        flex-flow: column;
        text-align: center
    }

    .des::after {
        content: '.';
        font-size: 0;
        display: block;
        border-radius: 20px;
        height: 6px;
        width: 35%;
        background: #eee;
        margin: 10px auto
    }

    .pqr {
        text-align: center;
        margin: 0 30px
    }

    .para {
        text-align: center;
        padding-left: 90px;
        padding-top: 10px
    }

    .klo {
        display: flex;
        text-align: center;
        margin: 0 auto;
        margin-right: 40px
    }
}
</style>
</body>
</html>